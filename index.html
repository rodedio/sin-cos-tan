<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leren over Sinus, Cosinus & Tangens (D3.js, Dark Mode)</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f0f9ff;
            --text-color: #333;
            --container-bg: #ffffff;
            --header-color: #005A9C;
            --explanation-subtitle-color: #007bff;
            --section-bg: #e7f5ff;
            --section-border: #bde0fe;
            --diagram-wrapper-bg: #f8f9fa;
            --diagram-wrapper-border: #dee2e6;
            --input-bg: #fff;
            --input-text: #333;
            --input-border: #ced4da;
            --button-primary-bg: #007bff;
            --button-primary-text: white;
            --button-primary-hover-bg: #0056b3;
            --button-secondary-bg: #6c757d;
            --button-secondary-text: white;
            --button-secondary-hover-bg: #5a6268;
            --feedback-correct-text: #155724;
            --feedback-correct-bg: #d4edda;
            --feedback-correct-border: #c3e6cb;
            --feedback-incorrect-text: #721c24;
            --feedback-incorrect-bg: #f8d7da;
            --feedback-incorrect-border: #f5c6cb;
            --uitleg-extra-bg: #fff3cd;
            --uitleg-extra-border: #ffeeba;
            --uitleg-stap-bg: #e7f5ff;
            --uitleg-stap-border: #007bff;
            --uitleg-stap-header: #005A9C;
            --svg-default-stroke: #333;
            --svg-highlight-stroke: #d9534f;
            --svg-text-highlight-fill: #d9534f;
            --svg-vertex-label-fill: #005A9C;
            --svg-side-label-fill: #007bff;
            --svg-angle-label-fill: red;
            --svg-right-angle-stroke: #555;
            --svg-arc-fill: rgba(255,0,0,0.3);
            --svg-arc-highlight-fill: rgba(255,0,0,0.5);
            --link-color: #007bff;
        }
        body.dark-mode {
            --bg-color: #1a1a1a;
            --text-color: #e0e0e0;
            --container-bg: #2c2c2c;
            --header-color: #66b2ff;
            --explanation-subtitle-color: #80c7ff;
            --section-bg: #383838;
            --section-border: #555555;
            --diagram-wrapper-bg: #222222;
            --diagram-wrapper-border: #4a4a4a;
            --input-bg: #3e3e3e;
            --input-text: #e0e0e0;
            --input-border: #666666;
            --button-primary-bg: #66b2ff;
            --button-primary-text: #1a1a1a;
            --button-primary-hover-bg: #80c7ff;
            --button-secondary-bg: #5a6268;
            --button-secondary-text: #e0e0e0;
            --button-secondary-hover-bg: #707880;
            --feedback-correct-text: #a7f0ba;
            --feedback-correct-bg: #223e2b;
            --feedback-correct-border: #355e40;
            --feedback-incorrect-text: #f5b9c0;
            --feedback-incorrect-bg: #4a2328;
            --feedback-incorrect-border: #70363d;
            --uitleg-extra-bg: #4d432c;
            --uitleg-extra-border: #806f44;
            --uitleg-stap-bg: #383838;
            --uitleg-stap-border: #66b2ff;
            --uitleg-stap-header: #66b2ff;
            --svg-default-stroke: #c9d1d9;
            --svg-highlight-stroke: #ff8c82;
            --svg-text-highlight-fill: #ff8c82;
            --svg-vertex-label-fill: #66b2ff;
            --svg-side-label-fill: #80c7ff;
            --svg-angle-label-fill: #ff8080;
            --svg-right-angle-stroke: #888888;
            --svg-arc-fill: rgba(255,128,128,0.3);
            --svg-arc-highlight-fill: rgba(255,128,128,0.5);
            --link-color: #66b2ff;
        }
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding-top: 20px;
            padding-bottom: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 800px;
            width: 90%;
            margin: 20px auto;
            background: var(--container-bg);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            transition: background-color 0.3s;
        }
        h1, h2 {
            color: var(--header-color);
            text-align: center;
            margin-bottom: 20px;
        }
        h3.explanation-subtitle {
            color: var(--explanation-subtitle-color);
            margin-top: 25px;
            margin-bottom: 10px;
            border-bottom: 1px solid var(--section-border);
            padding-bottom: 5px;
        }
        .explanation, .quiz, .feedback-section, .selection-menu {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid var(--section-border);
            border-radius: 8px;
            background-color: var(--section-bg);
            transition: background-color 0.3s, border-color 0.3s;
        }
        .triangle-container-wrapper, #triangle-diagram {
            text-align: center;
            margin-bottom: 15px;
            background-color: var(--diagram-wrapper-bg);
            border-radius: 6px;
            padding: 10px;
            border: 1px solid var(--diagram-wrapper-border);
            transition: background-color 0.3s, border-color 0.3s;
        }
        svg {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        input[type="number"] {
            padding: 10px;
            margin-right: 10px;
            border: 1px solid var(--input-border);
            background-color: var(--input-bg);
            color: var(--input-text);
            border-radius: 6px;
            font-size: 1rem;
            width: calc(50% - 15px);
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }
        button {
            padding: 12px 20px;
            background-color: var(--button-primary-bg);
            color: var(--button-primary-text);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s ease, color 0.3s ease;
            margin-top: 10px;
        }
        button:hover { background-color: var(--button-primary-hover-bg); }
        #toggleExplanationButton, #darkModeToggle {
            background-color: var(--button-secondary-bg);
            color: var(--button-secondary-text);
            margin-left: 5px;
        }
        #toggleExplanationButton:hover, #darkModeToggle:hover {
            background-color: var(--button-secondary-hover-bg);
        }
        .streak-counter {
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
            color: var(--header-color);
            margin-bottom: 15px;
        }
        .streak-counter span {
            color: var(--explanation-subtitle-color);
            font-size: 1.3em;
        }
        .correct { color: var(--feedback-correct-text); background-color: var(--feedback-correct-bg); border: 1px solid var(--feedback-correct-border); padding: 10px; border-radius: 6px; }
        .incorrect { color: var(--feedback-incorrect-text); background-color: var(--feedback-incorrect-bg); border: 1px solid var(--feedback-incorrect-border); padding: 10px; border-radius: 6px; }
        #feedback { margin-top: 15px; font-weight: bold; min-height: 50px; }
        .uitleg-extra {
            display: block;
            margin-top:15px;
            padding:15px;
            background-color: var(--uitleg-extra-bg);
            border: 1px solid var(--uitleg-extra-border);
            border-radius: 6px;
            transition: background-color 0.3s, border-color 0.3s;
        }
        ul { list-style-position: inside; padding-left: 20px; }
        li { margin-bottom: 8px; }
        .explanation ul li { margin-bottom: 10px; }
        .explanation p { margin-bottom: 12px; }
        .triangle-side { stroke: var(--svg-default-stroke); stroke-linecap: round; }
        .triangle-side.highlighted-stroke { stroke: var(--svg-highlight-stroke); }
        .vertex-label { font-family: 'Inter', sans-serif; fill: var(--svg-vertex-label-fill); font-weight: bold; }
        .vertex-label.highlighted-fill { fill: var(--svg-text-highlight-fill); }
        .side-label { font-family: 'Inter', sans-serif; fill: var(--svg-side-label-fill); text-anchor: middle; }
        .side-label.highlighted-fill { fill: var(--svg-text-highlight-fill); }
        .angle-label-text { font-family: 'Inter', sans-serif; fill: var(--svg-angle-label-fill); font-weight: bold; }
        .angle-label-text.highlighted-fill { fill: var(--svg-text-highlight-fill); }
        .angle-arc { fill: var(--svg-arc-fill); }
        .angle-arc.highlighted-fill { fill: var(--svg-arc-highlight-fill); }
        .right-angle-symbol { stroke: var(--svg-right-angle-stroke); fill: none; }
        #uitleg-fout-stappen-container .stap-uitleg {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px dashed var(--uitleg-stap-border);
            border-radius: 6px;
            background-color: var(--uitleg-stap-bg);
            transition: background-color 0.3s, border-color 0.3s;
        }
        #uitleg-fout-stappen-container h5 {
            color: var(--uitleg-stap-header);
            margin-top: 0;
        }
        #uitleg-fout-stappen-container svg {
            border: 1px solid var(--diagram-wrapper-border);
            background-color: var(--container-bg);
            transition: background-color 0.3s, border-color 0.3s;
        }
        .selection-menu h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--header-color);
            font-size: 1.2em;
            text-align: left;
        }
        .selection-menu .checkbox-group {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .selection-menu label {
            margin-left: 8px;
            font-size: 1em;
            color: var(--text-color);
            cursor: pointer;
        }
        .selection-menu input[type="checkbox"] {
            transform: scale(1.2);
            cursor: pointer;
            margin-right: 5px;
        }
        .button-group {
            text-align: center;
            margin-bottom: 20px;
        }
        @media (max-width: 600px) {
            .container { width: 95%; padding: 15px; }
            input[type="number"] { width: calc(100% - 20px); margin-bottom: 10px; }
            button { width: 100%; margin-top: 5px; }
            #toggleExplanationButton, #darkModeToggle { width: auto; margin: 5px; }
            .button-group button { width: auto; display: inline-block; margin: 5px; }
            h1 { font-size: 1.8rem; }
            h2 { font-size: 1.5rem; }
            .selection-menu h3 { font-size: 1.1em; }
            .selection-menu label { font-size: 0.9em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📐 Sinus, Cosinus en Tangens Leren</h1>
        <div class="button-group">
            <button id="toggleExplanationButton">Toon Uitleg</button>
            <button id="darkModeToggle">🌙 Dark Mode</button>
        </div>
        <div class="streak-counter">Winnende streak: <span id="streakValue">0</span></div>
        <div class="explanation" style="display: none;">
            <!-- Laat je uitleg hier staan zoals in het origineel -->
        </div>
        <div class="selection-menu">
            <h3>Kies wat je wilt oefenen:</h3>
            <div class="checkbox-group">
                <input type="checkbox" id="selectSinSides" name="questionType" value="sinSides" checked>
                <label for="selectSinSides">Sinus (zijdes berekenen)</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="selectCosSides" name="questionType" value="cosSides" checked>
                <label for="selectCosSides">Cosinus (zijdes berekenen)</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="selectTanSides" name="questionType" value="tanSides" checked>
                <label for="selectTanSides">Tangens (zijdes berekenen)</label>
            </div>
        </div>
        <div class="quiz">
            <h2>🎓 Overhoring: Tijd om te oefenen!</h2>
            <p id="question">Klik op "Nieuwe Vraag" om te beginnen.</p>
            <div id="triangle-diagram">
                <svg id="questionTriangleSvg" width="300" height="225"></svg>
            </div>
            <div>
                <label for="answer" id="answerLabel">Antwoord (zijde, 1 decimaal): </label>
                <input type="number" id="answer" step="0.1" placeholder="bv. 7.3">
            </div>
            <button onclick="checkAnswer()">Controleer Antwoord</button>
            <button onclick="newQuestion()">Nieuwe Vraag</button>
            <div id="feedback" class="feedback-section"></div>
            <div id="uitleg-fout" class="uitleg-extra" style="display:none;">
                <h4>Uitleg van de oplossing:</h4>
                <p>De gebruikte regel was: <strong id="uitleg-fout-regel"></strong></p>
                <p>De berekening was: <strong id="uitleg-fout-berekening"></strong></p>
                <div id="uitleg-fout-stappen-container" style="margin-top: 15px;">
                </div>
            </div>
        </div>
    </div>
    <script>
        // JavaScript code uit het vorige antwoord, exact zoals geleverd (zie vorige bericht).
        // Kortheidshalve niet nogmaals hier overgenomen, plak de logica uit het vorige antwoord.
        // Als je de volledige code-inhoud wilt, geef een seintje!
    </script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$']], displayMath: [['$$','$$']], processEscapes: true, skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'] }, messageStyle: "none" });
    </script>
</body>
</html>
